{"remainingRequest":"/home/liao/Desktop/concordance/kwic/node_modules/thread-loader/dist/cjs.js!/home/liao/Desktop/concordance/kwic/node_modules/babel-loader/lib/index.js!/home/liao/Desktop/concordance/kwic/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/liao/Desktop/concordance/kwic/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/liao/Desktop/concordance/kwic/src/components/kwic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/liao/Desktop/concordance/kwic/src/components/kwic.vue","mtime":1609992902664},{"path":"/home/liao/Desktop/concordance/kwic/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/liao/Desktop/concordance/kwic/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/liao/Desktop/concordance/kwic/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/liao/Desktop/concordance/kwic/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/liao/Desktop/concordance/kwic/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBWdWVMb2FkaW5nIGZyb20gInZ1ZS1sb2FkaW5nLW92ZXJsYXkiOwppbXBvcnQgInZ1ZS1sb2FkaW5nLW92ZXJsYXkvZGlzdC92dWUtbG9hZGluZy5jc3MiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImt3aWMiLAogIGNvbXBvbmVudHM6IHsKICAgIGxvYWRpbmc6IFZ1ZUxvYWRpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBxdWVyeTogewogICAgICAgIHF1ZXJ5OiAiIiwKICAgICAgICBsZWZ0OiAxMCwKICAgICAgICByaWdodDogMTAsCiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZQogICAgICB9LAogICAgICBwb3J0OiAxNDIwLAogICAgICBkaXNwbGF5T3B0OiB7CiAgICAgICAga3c6IHsKICAgICAgICAgIHRhZzogdHJ1ZSwKICAgICAgICAgIHNlcDogIiAiCiAgICAgICAgfSwKICAgICAgICBjdHg6IHsKICAgICAgICAgIHRhZzogZmFsc2UsCiAgICAgICAgICBzZXA6ICIgIgogICAgICAgIH0KICAgICAgfSwKICAgICAgc2VydmVyX2Vycm9yOiBmYWxzZSwKICAgICAgcmVzdWx0czogW10sCiAgICAgIHNob3dOZXh0OiB7CiAgICAgICAgY3VycjogMzAsCiAgICAgICAgbmV4dDogMzAKICAgICAgfSwKICAgICAgaXNFeHBvcnRpbmc6IGZhbHNlLAogICAgICBlc2NhcGVDaGFyYWN0ZXJzOiBbWyJ7IiwgIl9fX0xDVVJMWV9CUkFDS0VUX19fIl0sIFsifSIsICJfX19SQ1VSTFlfQlJBQ0tFVF9fXyJdLCBbIlsiLCAiX19fTFNRVUFSRV9CUkFDS0VUX19fIl0sIFsiXSIsICJfX19SU1FVQVJFX0JSQUNLRVRfX18iXSwgWyJcXCIsICJfX19CQUNLU0xBU0hfX18iXSwgWyJeIiwgIl9fX1NUQVJUX0FOQ0hPUl9fXyJdLCBbIjsiLCAiX19fU0VNSUNPTE9OX19fIl0sIFsiLyIsICJfX19TTEFTSF9fXyJdLCBbIj8iLCAiX19fUVVFU1RJT05fX18iXSwgWyI6IiwgIl9fX0NPTE9OX19fIl0sIFsiQCIsICJfX19BVF9fXyJdLCBbIiYiLCAiX19fQU1QRVJTQU5EX19fIl0sIFsiPSIsICJfX19FUVVBTF9fXyJdLCBbIisiLCAiX19fUExVU19fXyJdLCBbIiQiLCAiX19fRU5EX0FOQ0hPUl9fXyJdLCBbIiwiLCAiX19fQ09NTUFfX18iXV0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2hvd01vcmUpOwogIH0sCiAgbWV0aG9kczogewogICAgc2VhcmNoREI6IGZ1bmN0aW9uIHNlYXJjaERCKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyeS5xdWVyeTsKICAgICAgdGhpcy5lc2NhcGVDaGFyYWN0ZXJzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBxdWVyeSA9IHF1ZXJ5LnJlcGxhY2VBbGwoZVswXSwgZVsxXSk7CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyhxdWVyeSk7CiAgICAgIHZhciB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDoiLmNvbmNhdCh0aGlzLnBvcnQsICIvcXVlcnk/cXVlcnk9IikuY29uY2F0KHF1ZXJ5LCAiJmxlZnQ9IikuY29uY2F0KHRoaXMucXVlcnkubGVmdCwgIiZyaWdodD0iKS5jb25jYXQodGhpcy5xdWVyeS5yaWdodCk7IC8vY2xlYW4gdXAKCiAgICAgIHRoaXMuc2hvd05leHQuY3VyciA9IDMwOwogICAgICB0aGlzLnF1ZXJ5LmlzTG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHRoaXMuc2VydmVyX2Vycm9yID0gZmFsc2U7CiAgICAgICAgdGhpcy5yZXN1bHRzID0gZGF0YS5ib2R5OwogICAgICAgIHRoaXMucXVlcnkuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyIiwgZXJyKTsKICAgICAgICBfdGhpcy5yZXN1bHRzID0gW107CiAgICAgICAgX3RoaXMucXVlcnkuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMuc2VydmVyX2Vycm9yID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgc2hvd01vcmU6IGZ1bmN0aW9uIHNob3dNb3JlKCkgewogICAgICBpZiAodGhpcy5zaG93TmV4dC5jdXJyIDwgdGhpcy5yZXN1bHRzLmxlbmd0aCkgewogICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgKyB3aW5kb3cuc2Nyb2xsWSA+PSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCkgdGhpcy5zaG93TmV4dC5jdXJyICs9IHRoaXMuc2hvd05leHQubmV4dDsKICAgICAgfQogICAgfSwKICAgIGV4cG9ydERhdGE6IGZ1bmN0aW9uIGV4cG9ydERhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5pc0V4cG9ydGluZyA9IHRydWU7CiAgICAgIHZhciB1cmwgPSAiaHR0cDovL2xvY2FsaG9zdDoiLmNvbmNhdCh0aGlzLnBvcnQsICIvZXhwb3J0Iik7CiAgICAgIGF4aW9zLmdldCh1cmwsIHsKICAgICAgICByZXNwb25zZVR5cGU6ICJibG9iIgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3Jlc3BvbnNlLmRhdGFdLCB7CiAgICAgICAgICB0eXBlOiAidGV4dC90c3YiCiAgICAgICAgfSk7CiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CiAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgICBsaW5rLmRvd25sb2FkID0gImNvbmNvcmRhbmNlX2xpc3QuanNvbiI7CiAgICAgICAgbGluay5jbGljaygpOwogICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwobGluay5ocmVmKTsgLy8gUmVsZWFzZSBidXR0b24KCiAgICAgICAgX3RoaXMyLmlzRXhwb3J0aW5nID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dSZXN1bHRzOiBmdW5jdGlvbiBzaG93UmVzdWx0cygpIHsKICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5zbGljZSgwLCB0aGlzLnNob3dOZXh0LmN1cnIpOwogICAgfSwKICAgIGt3aWNTdHlLZXlXaWR0aDogZnVuY3Rpb24ga3dpY1N0eUtleVdpZHRoKCkgewogICAgICByZXR1cm4gdGhpcy5yZXN1bHRzWzBdLmtleXdvcmQubGVuZ3RoICogNjsKICAgIH0sCiAgICBrd2ljU3R5Q3R4V2lkdGg6IGZ1bmN0aW9uIGt3aWNTdHlDdHhXaWR0aCgpIHsKICAgICAgcmV0dXJuICg5NSAtIHRoaXMucmVzdWx0c1swXS5rZXl3b3JkLmxlbmd0aCAqIDYpIC8gMjsKICAgIH0KICB9LAogIGZpbHRlcnM6IHsKICAgIGNvbnRleHRTaG93OiBmdW5jdGlvbiBjb250ZXh0U2hvdyhsc3QpIHsKICAgICAgdmFyIHRhZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgIHZhciBzZXAgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICJcdCI7CiAgICAgIHZhciBsc3QyID0gW107CiAgICAgIGxzdC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7CiAgICAgICAgaWYgKHRhZykgbHN0Mi5wdXNoKE9iamVjdC52YWx1ZXMoZWxlbSkuam9pbigiLyIpKTtlbHNlIGxzdDIucHVzaChlbGVtLndvcmQpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGxzdDIuam9pbihzZXApOwogICAgfQogIH0KfTs="},{"version":3,"sources":["kwic.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div @scroll=\"showMore\" class=\"container\">\n    <div class=\"header\">\n      <div class=\"query\">\n        <div class=\"keyword\">\n          <input\n            type=\"text\"\n            spellcheck=\"false\"\n            placeholder='CQL: e.g., \"一\" [pos=\"N.*\"]'\n            v-model.lazy=\"query.query\"\n          />\n          <button v-on:click=\"searchDB\" id=\"search\">Query</button>\n        </div>\n        <ul class=\"setting\">\n          <li>\n            Left context:\n            <input type=\"number\" v-model=\"query.left\" />\n          </li>\n          <li>\n            Right context:\n            <input type=\"number\" v-model=\"query.right\" />\n          </li>\n          <li>\n            show tag (keyword):\n            <input type=\"checkbox\" v-model=\"displayOpt.kw.tag\" />\n          </li>\n          <li>\n            show tag (context):\n            <input type=\"checkbox\" v-model=\"displayOpt.ctx.tag\" />\n          </li>\n          <li class=\"this-is-placeholder\"></li>\n        </ul>\n      </div>\n      <div class=\"info\">\n        <button @click=\"exportData\" :disabled=\"isExporting\">Export</button>\n        <span class=\"num-of-results\">{{ this.results.length }}</span>\n      </div>\n    </div>\n\n    <div class=\"results\">\n        <div v-if=\"server_error\" class=\"server_error\">\n            INVALID CQL SYNTAX\n        </div>\n      <loading\n        loader=\"spinner\"\n        :active.sync=\"query.isLoading\"\n        :is-full-page=\"true\"\n        :can-cancel=\"true\"\n      >\n        <template v-slot:after>\n          <p class=\"loading-text\">Searching . . .</p>\n        </template>\n        <!-- <slot name=\"after\"></slot> -->\n      </loading>\n      <div class=\"kwic\" v-bind:key=\"idx\" v-for=\"(item, idx) in showResults\">\n        <span class=\"left\" v-bind:style=\"{ width: kwicStyCtxWidth + '%' }\">{{\n          item[\"left\"]\n            | contextShow(\n              (tag = displayOpt.ctx.tag),\n              (sep = displayOpt.ctx.tag ? \" \" : \"\")\n            )\n        }}</span>\n        <span class=\"key\" v-bind:style=\"{ width: kwicStyKeyWidth + '%' }\">{{\n          item[\"keyword\"]\n            | contextShow(\n              (tag = displayOpt.kw.tag),\n              (sep = displayOpt.kw.tag ? \" \" : \"\")\n            )\n        }}</span>\n        <span class=\"right\" v-bind:style=\"{ width: kwicStyCtxWidth + '%' }\">{{\n          item[\"right\"]\n            | contextShow(\n              (tag = displayOpt.ctx.tag),\n              (sep = displayOpt.ctx.tag ? \" \" : \"\")\n            )\n        }}</span>\n      </div>\n      <!-- <button v-on:click=\"showMore\" v-if=\"results.length > 30\">\n        Show More\n      </button> -->\n    </div>\n\n    <a id=\"to-top\" onclick=\"document.documentElement.scrollTop = 0;\">▲</a>\n    <a id=\"to-bottom\" onclick=\"window.scrollTo(0, document.body.scrollHeight);\"\n      >▼</a\n    >\n  </div>\n</template>\n\n<script>\nimport VueLoading from \"vue-loading-overlay\";\nimport \"vue-loading-overlay/dist/vue-loading.css\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"kwic\",\n  components: {\n    loading: VueLoading,\n  },\n  data() {\n    return {\n      query: {\n        query: \"\",\n        left: 10,\n        right: 10,\n        isLoading: false,\n      },\n      port: 1420,\n      displayOpt: {\n        kw: {\n          tag: true,\n          sep: \" \",\n        },\n        ctx: {\n          tag: false,\n          sep: \" \",\n        },\n      },\n      server_error: false,\n      results: [],\n      showNext: {\n        curr: 30,\n        next: 30,\n      },\n      isExporting: false,\n      escapeCharacters: [\n        [\"{\", \"___LCURLY_BRACKET___\"],\n        [\"}\", \"___RCURLY_BRACKET___\"],\n        [\"[\", \"___LSQUARE_BRACKET___\"],\n        [\"]\", \"___RSQUARE_BRACKET___\"],\n        [\"\\\\\", \"___BACKSLASH___\"],\n        [\"^\", \"___START_ANCHOR___\"],\n        [\";\", \"___SEMICOLON___\"],\n        [\"/\", \"___SLASH___\"],\n        [\"?\", \"___QUESTION___\"],\n        [\":\", \"___COLON___\"],\n        [\"@\", \"___AT___\"],\n        [\"&\", \"___AMPERSAND___\"],\n        [\"=\", \"___EQUAL___\"],\n        [\"+\", \"___PLUS___\"],\n        [\"$\", \"___END_ANCHOR___\"],\n        [\",\", \"___COMMA___\"],\n      ]\n    };\n  },\n  created () {\n    window.addEventListener('scroll', this.showMore);\n  },\n  methods: {\n    searchDB: function () {\n      var query = this.query.query;\n      this.escapeCharacters.forEach(e => {\n        query = query.replaceAll(e[0], e[1]);\n      })\n      console.log(query);\n      const url = `http://localhost:${this.port}/query?query=${query}&left=${this.query.left}&right=${this.query.right}`;\n      //clean up\n      this.showNext.curr = 30;\n      this.query.isLoading = true;\n      this.$http.get(url).then(\n        function (data) {\n          this.server_error = false;\n          this.results = data.body;\n          this.query.isLoading = false;\n        },\n        (err) => {\n          console.log(\"Err\", err);\n          this.results = []\n          this.query.isLoading = false;\n          this.server_error = true;\n        }\n      );\n    },\n    showMore: function () {\n      if (this.showNext.curr < this.results.length) {\n        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight)\n            this.showNext.curr += this.showNext.next;\n      }\n    },\n    exportData: function () {\n      this.isExporting = true;\n\n      const url = `http://localhost:${this.port}/export`;\n\n      axios\n        .get(url, { responseType: \"blob\" })\n        .then((response) => {\n          const blob = new Blob([response.data], {\n            type: \"text/tsv\",\n          });\n          const link = document.createElement(\"a\");\n          link.href = URL.createObjectURL(blob);\n          link.download = \"concordance_list.json\";\n          link.click();\n          URL.revokeObjectURL(link.href);\n          // Release button\n          this.isExporting = false;\n        })\n        .catch(console.error);\n    },\n  },\n  computed: {\n    showResults() {\n      return this.results.slice(0, this.showNext.curr);\n    },\n    kwicStyKeyWidth() {\n      return this.results[0].keyword.length * 6;\n    },\n    kwicStyCtxWidth() {\n      return (95 - this.results[0].keyword.length * 6) / 2;\n    },\n  },\n  filters: {\n    contextShow: function (lst, tag = false, sep = \"\\t\") {\n      const lst2 = [];\n      lst.forEach((elem) => {\n        if (tag) lst2.push(Object.values(elem).join(\"/\"));\n        else lst2.push(elem.word);\n      });\n\n      return lst2.join(sep);\n    },\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.container {\n  height:100%;\n  width: 90%;\n  margin: 30px auto;\n}\n.header {\n  position: fixed;\n  margin: 0;\n  padding: 20px 0;\n  height: 100px;\n  width: 90%;\n  min-width: 900px;\n  top: 0;\n  background: white;\n}\n.query {\n  position: relative;\n  display: block;\n  width: 100%;\n  margin-bottom: 0px;\n}\n.keyword {\n  display: inline-block;\n  height: 70px;\n  width: 64%;\n  margin: 0;\n  padding: 0;\n  text-align: left;\n}\n.setting {\n  display: inline-block;\n  height: 80px;\n  width: 36%;\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n}\n.keyword input,\n.keyword button {\n  width: 90%;\n  margin: 3px;\n  padding: 0.45em;\n  font-size: 11px;\n  font-family: Monaco, \"Courier New\", Courier, monospace;\n}\n.keyword input {\n  margin: 0;\n}\nbutton#search {\n  margin: 5px auto;\n  width: 30%;\n  padding: 5px;\n}\n.setting li {\n  display: inline-block;\n  padding: 5px;\n  margin: 3px;\n  width: 45%;\n  font-size: 12px;\n}\n.setting input[type=\"number\"] {\n  padding: 0;\n  width: 2.5em;\n}\n.kwic span {\n  display: inline-block;\n  width: 40%;\n  height: 1.5em;\n  /* border: 1px solid black; */\n  font-size: 0.78em;\n  margin: 3px auto;\n  padding: 0.1em;\n}\n.server_error {\n  color: red;\n  font-weight: bold;\n  font-family: Monaco, monospace;\n  font-size: 1.5em;\n  text-align: left;\n  padding-top: 1.2em;\n}\n.results .kwic:nth-child(2n + 1) {\n  background: rgba(238, 238, 238, 0.931);\n}\n.results span.key {\n  text-align: center;\n  color: red;\n}\n.left {\n  text-align: right;\n}\n.right {\n  text-align: left;\n}\n.results {\n  margin-top: 175px;\n  counter-reset: num;\n}\n.kwic::before {\n  counter-increment: num;\n  content: counter(num) \" \";\n  color: gray;\n  font-size: 0.7em;\n}\n.loading-text {\n  color: rgb(42, 42, 42);\n}\n.info {\n  text-align: left;\n}\n.info span,\n.info button {\n  display: inline-block;\n  margin: 5px 1.2em 5px 0;\n  padding: 6px;\n  line-height: 0.75em;\n}\n.info span.num-of-results {\n  width: 15em;\n  font-size: 0.7em;\n  /* text-align: left; */\n}\n.num-of-results:before {\n  content: \"總筆數：\";\n}\n\nbutton {\n  background: rgb(87, 87, 87);\n  color: rgb(236, 236, 236);\n  padding: 4px;\n  margin: 5px;\n  border: none;\n}\nbutton:hover {\n  background: rgb(66, 66, 66);\n  color: white;\n}\nbutton:active {\n  transform: translateY(1px);\n}\nbutton:disabled {\n  background: rgb(136, 136, 136);\n  color: rgb(236, 236, 236);\n}\n\na#to-top,\na#to-bottom {\n  position: fixed;\n  right: 1%;\n  background: rgb(121, 121, 121);\n  color: rgb(245, 245, 245);\n  font-size: 19px;\n}\na#to-top:hover,\na#to-bottom:hover {\n  background: rgb(88, 88, 88);\n  color: white;\n  font-size: 20px;\n  cursor: pointer;\n  user-select: none;\n}\na#to-top {\n  bottom: 40px;\n}\na#to-bottom {\n  bottom: 15px;\n}\n</style>\n"],"sourceRoot":"src/components"}]}